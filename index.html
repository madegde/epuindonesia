<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPU Indonesia - Economic Policy Uncertainty Index</title>
    <meta name="description" content="Economic Policy Uncertainty Index for Indonesia (1994-2024)">
    
    <!-- Plotly.js from CDN -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: #f8f9fa;
        }

        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 100px 20px;
            text-align: center;
        }

        .hero h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .hero .subtitle {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .section {
            background: white;
            padding: 60px;
            border-radius: 15px;
            margin-bottom: 40px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }

        h2 {
            font-size: 2.2em;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .chart-container {
            margin: 40px 0;
            height: 600px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            background: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.95;
        }

        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .download-btn {
            display: inline-block;
            padding: 12px 25px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            margin: 10px 5px;
            transition: transform 0.3s;
        }

        .download-btn:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <div class="hero">
        <h1>EPU Indonesia</h1>
        <p class="subtitle">Economic Policy Uncertainty Index for Indonesia (1994-2024)</p>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Overview Section -->
        <section class="section">
            <h2>Research Overview</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">30</div>
                    <div class="stat-label">Years Analyzed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">6,340</div>
                    <div class="stat-label">Articles Processed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">362</div>
                    <div class="stat-label">Monthly EPU Values</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">5</div>
                    <div class="stat-label">News Sources</div>
                </div>
            </div>

            <p style="font-size: 1.1em; line-height: 1.8; margin-top: 30px;">
                This study constructs the first comprehensive news-based Economic Policy Uncertainty (EPU) index for Indonesia, covering October 1994 to December 2024. Using the Baker, Bloom, and Davis (2016) methodology, we analyze 6,340 articles from five leading Indonesian newspapers to track policy uncertainty over three decades.
            </p>
        </section>

        <!-- Article Coverage Chart -->
        <section class="section">
            <h2>Figure 1: Article Coverage per Publisher</h2>
            <div class="chart-container">
                <div class="loader" id="loader1"></div>
                <div id="article-coverage-chart" style="width:100%;height:100%;"></div>
            </div>
            
            <div style="margin-top: 20px;">
                <a href="#" class="download-btn" onclick="downloadData('article-coverage')">Download Article Coverage Data</a>
            </div>
        </section>

        <!-- EPU Index Chart -->
        <section class="section">
            <h2>Figure 2: Economic Policy Uncertainty Index</h2>
            <div class="chart-container">
                <div class="loader" id="loader2"></div>
                <div id="epu-index-chart" style="width:100%;height:100%;"></div>
            </div>
            
            <div style="margin-top: 20px;">
                <a href="#" class="download-btn" onclick="downloadData('epu-index')">Download EPU Index Data</a>
                <a href="#" class="download-btn" onclick="downloadData('full-dataset')">Download Full Dataset</a>
            </div>
        </section>

        <!-- Methodology -->
        <section class="section">
            <h2>Methodology</h2>
            <p><strong>Data Sources:</strong> Articles from The Jakarta Post, LKBN ANTARA, Bisnis Indonesia, Tempo, and The Jakarta Globe</p>
            <p><strong>Period:</strong> October 1994 - December 2024</p>
            <p><strong>Method:</strong> Baker, Bloom & Davis (2016) news-based EPU index construction</p>
            <p><strong>Keywords:</strong> Economic + Policy + Uncertainty terms (see paper for full list)</p>
        </section>
    </div>

    <script>
        // Your actual data will be loaded here
        // This example shows how to structure it

        // Load and process your actual EPU data
        const epuData = [
            // This will be populated from your CSV data
            // Format: {x: '1994-10-01', y: 42.23}
        ];

        const articleData = [
            // This will be populated from your article coverage data  
            // Format: {x: '1994-10-04', y: 'JKPOST', publisher: 'The Jakarta Post'}
        ];

        // Function to create Article Coverage Chart (Figure 1)
        function createArticleCoverageChart() {
            // Hide loader
            document.getElementById('loader1').style.display = 'none';
            
            // Create the scatter plot using your actual data structure
            const trace = {
                x: [], // Dates from your data
                y: [], // Publisher codes 
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 8,
                    opacity: 0.7,
                    color: [] // Colors based on publisher
                },
                text: [], // Publisher names for hover
                hovertemplate: '<b>%{text}</b><br>Date: %{x}<extra></extra>'
            };

            const layout = {
                title: {
                    text: 'Article Coverage per Publisher Over Time',
                    font: {size: 20}
                },
                xaxis: {
                    title: 'Date',
                    type: 'date'
                },
                yaxis: {
                    title: 'Publisher Code',
                    categoryorder: 'array',
                    categoryarray: ['JKPOST', 'ANTARA', 'BISNIS', 'TEMPOE', 'TEMGEN', 'JGLOBE']
                },
                height: 500,
                margin: {l: 80, r: 80, t: 80, b: 80}
            };

            Plotly.newPlot('article-coverage-chart', [trace], layout, {responsive: true});
        }

        // Function to create EPU Index Chart (Figure 2)  
        function createEPUIndexChart() {
            // Hide loader
            document.getElementById('loader2').style.display = 'none';
            
            const trace = {
                x: [], // Dates from Zt dataframe
                y: [], // EPU_Index values from Zt dataframe
                type: 'scatter',
                mode: 'lines',
                line: {
                    color: '#667eea',
                    width: 2.5
                },
                hovertemplate: 'Date: %{x}<br>EPU Index: %{y:.1f}<extra></extra>'
            };

            const layout = {
                title: {
                    text: 'Economic Policy Uncertainty (EPU) Index',
                    font: {size: 20}
                },
                xaxis: {
                    title: 'Date',
                    type: 'date',
                    tickformat: '%b\n%Y'
                },
                yaxis: {
                    title: 'EPU Index'
                },
                height: 500,
                margin: {l: 80, r: 80, t: 80, b: 80},
                annotations: [
                    {
                        x: '1998-06-01',
                        y: 319.96, // Actual value from your data
                        text: 'Asian Financial Crisis',
                        showarrow: true,
                        arrowhead: 2,
                        ax: -30,
                        ay: -20
                    },
                    {
                        x: '2001-05-01', 
                        y: 254.69,
                        text: 'Wahid Scandal',
                        showarrow: true,
                        arrowhead: 2,
                        ax: 0,
                        ay: -70
                    },
                    {
                        x: '2020-09-01',
                        y: 227.74,
                        text: 'COVID-19 Pandemic', 
                        showarrow: true,
                        arrowhead: 2,
                        ax: -10,
                        ay: -30
                    }
                    // Add more annotations from your data
                ]
            };

            Plotly.newPlot('epu-index-chart', [trace], layout, {responsive: true});
        }

        // Function to download data
        function downloadData(type) {
            let csvContent = "data:text/csv;charset=utf-8,";
            let filename = "";
            
            if (type === 'epu-index') {
                // Add EPU index data
                csvContent += "Date,EPU_Index\n";
                // Add your actual EPU data here
                filename = "epu_indonesia_index.csv";
            } else if (type === 'article-coverage') {
                csvContent += "Date,Publisher,Publisher_Code\n"; 
                // Add your article coverage data here
                filename = "article_coverage_data.csv";
            }
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", filename);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Load data when page loads
        window.addEventListener('load', function() {
            // Option A: Load from CSV files you upload to GitHub
            loadDataFromCSV();
            
            // Option B: Embed data directly (see next section)
            // createChartsWithEmbeddedData();
        });

        // Function to load data from CSV files
        async function loadDataFromCSV() {
            try {
                // Load your EPU index data
                const epuResponse = await fetch('data/epu_index_data.csv');
                const epuText = await epuResponse.text();
                
                // Load your article coverage data  
                const articleResponse = await fetch('data/article_coverage_data.csv');
                const articleText = await articleResponse.text();
                
                // Parse CSV data (simple parser)
                const epuData = parseCSV(epuText);
                const articleData = parseCSV(articleText);
                
                // Create charts with real data
                createChartsWithRealData(epuData, articleData);
                
            } catch (error) {
                console.error('Error loading data:', error);
                // Fallback to embedded data or show error message
                createChartsWithEmbeddedData();
            }
        }

        // Simple CSV parser
        function parseCSV(text) {
            const lines = text.trim().split('\n');
            const headers = lines[0].split(',');
            const data = [];
            
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                const row = {};
                headers.forEach((header, index) => {
                    row[header.trim()] = values[index]?.trim();
                });
                data.push(row);
            }
            return data;
        }

        // Function to create charts with your real data
        function createChartsWithRealData(epuData, articleData) {
            // Process EPU data for chart
            const epuTrace = {
                x: epuData.map(d => d.Month),
                y: epuData.map(d => parseFloat(d.EPU_Index)),
                type: 'scatter',
                mode: 'lines',
                name: 'EPU Index',
                line: {color: '#667eea', width: 3}
            };

            // Process article data for chart  
            const publisherColors = {
                'JKPOST': '#1f77b4',
                'ANTARA': '#ff7f0e', 
                'BISNIS': '#2ca02c',
                'TEMPOE': '#d62728',
                'TEMGEN': '#9467bd',
                'JGLOBE': '#8c564b'
            };

            const articleTraces = [];
            const publishers = [...new Set(articleData.map(d => d.Publisher_Code))];
            
            publishers.forEach(pub => {
                const pubData = articleData.filter(d => d.Publisher_Code === pub);
                articleTraces.push({
                    x: pubData.map(d => d.Date),
                    y: pubData.map(d => d.Publisher_Code),
                    mode: 'markers',
                    type: 'scatter',
                    name: pub,
                    marker: {
                        color: publisherColors[pub] || '#000',
                        size: 6,
                        opacity: 0.7
                    }
                });
            });

            // Create EPU chart
            const epuLayout = {
                title: 'Economic Policy Uncertainty Index for Indonesia',
                xaxis: {title: 'Date', type: 'date'},
                yaxis: {title: 'EPU Index'},
                height: 500,
                // Add your annotations here
                annotations: [
                    {
                        x: '1998-06-01',
                        y: 319.96,
                        text: 'Asian Financial Crisis',
                        showarrow: true,
                        arrowhead: 2,
                        ax: -50,
                        ay: -30
                    }
                    // Add more annotations from your notebook
                ]
            };

            Plotly.newPlot('epu-index-chart', [epuTrace], epuLayout, {responsive: true});
            
            // Create article coverage chart
            const articleLayout = {
                title: 'Article Coverage per Publisher Over Time',
                xaxis: {title: 'Date', type: 'date'},
                yaxis: {title: 'Publisher Code'},
                height: 500
            };

            Plotly.newPlot('article-coverage-chart', articleTraces, articleLayout, {responsive: true});
            
            // Hide loaders
            document.getElementById('loader1').style.display = 'none';
            document.getElementById('loader2').style.display = 'none';
        }

        // Fallback function with embedded sample data
        function createChartsWithEmbeddedData() {
            // You can embed a subset of your data directly here
            const sampleEPUData = [
                {x: '1994-10-01', y: 42.23},
                {x: '1998-06-01', y: 319.96}, // Asian Financial Crisis peak
                {x: '2001-05-01', y: 254.69}, // Wahid scandal
                {x: '2020-09-01', y: 227.74}, // COVID-19 pandemic
                {x: '2024-11-01', y: 186.57}  // Recent US election
                // Add more key data points
            ];

            // Create simplified charts with sample data
            // Implementation similar to above but with embedded data
        }
    </script>
</body>
</html>
